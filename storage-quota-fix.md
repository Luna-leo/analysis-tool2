# LocalStorage容量制限エラーの修正

## 問題
CSVデータが大きすぎてLocalStorageの容量制限（通常5-10MB）を超えてしまい、`QuotaExceededError`が発生。

## 実装した対策

### 1. データサンプリング
- 1000点を超えるデータは自動的にサンプリング
- n点ごとに1点を保存してデータ量を削減
- 元のデータ点数とサンプリング率をログに出力

### 2. ストレージサイズチェック
- 保存前にデータサイズをチェック（2MB制限）
- 制限を超える場合は古いデータセットを自動削除
- 最新のデータを優先的に保持

### 3. エラーハンドリング
- `QuotaExceededError`をキャッチして適切に処理
- エラー時は最小限のデータ構造のみ保存
- ユーザーへの影響を最小限に抑える

## 今後の改善案
1. **IndexedDB**への移行 - より大容量のデータ保存が可能
2. **データ圧縮**の実装 - LZ-stringなどを使用
3. **オンデマンドローディング** - 必要なデータのみメモリに保持

これらの対策により、大きなCSVファイルでもエラーなくインポートできるようになりました。