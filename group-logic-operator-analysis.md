# Group "within group" 論理演算子の分析

## 現状の実装

現在のコードを確認したところ、グループレベルの「within group」論理演算子は実際には使用されていません。

### 問題点

1. **ConditionBuilder.tsx** (line 174-182)
   - グループに対して `logicalOperator` を設定できる
   - UIには「Group: AND/OR within group」と表示される

2. **conditionUtils.tsx** (line 23-32)
   - 実際の式の生成では、グループの `logicalOperator` は使用されない
   - 各条件の `logicalOperator` のみが使用される

### 実際の動作

```
グループ内の条件1
AND 条件2  ← この"AND"は条件2自身の logicalOperator
OR  条件3  ← この"OR"は条件3自身の logicalOperator
```

グループの「within group」設定を変更しても、実際の論理演算には影響しません。

## 本来の使い道（もし実装されていれば）

もしこの機能が正しく実装されていれば、以下のような使い道があったはずです：

### 1. デフォルトの論理演算子として
新しい条件をグループに追加する際のデフォルト値として使用

### 2. グループ内の全条件に適用
グループ内のすべての条件間の論理演算子を一括で制御

### 例：異常検知の条件
```
グループ1 (within group: AND)
  温度 > 100
  AND 圧力 > 50
  AND 振動 > 30

OR

グループ2 (within group: OR)
  エラーコード = E01
  OR エラーコード = E02
  OR エラーコード = E03
```

## 推奨される対応

1. **機能を削除**: 混乱を避けるため、使われていない「within group」セレクターを削除
2. **機能を実装**: グループ内の論理演算子を実際に機能させる
3. **UIを改善**: 各条件の論理演算子の設定方法をより分かりやすくする

現状では、この「within group」設定は実際には機能していないため、ユーザーの混乱を招く可能性があります。