@import url('https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap');
@import '../styles/theme.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  font-family: 'Source Sans 3', 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* Hide scrollbar for Chrome, Safari and Opera */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Hide scrollbar for IE, Edge and Firefox */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
}


@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Performance optimizations for production */
@layer utilities {
  /* GPU acceleration for chart containers */
  .chart-container,
  .chart-card,
  .chart-preview-container {
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  
  /* Optimize SVG rendering - but preserve quality for icons */
  svg {
    shape-rendering: auto; /* optimizeSpeedから変更 */
  }
  
  /* High quality rendering for icons */
  .lucide {
    shape-rendering: geometricPrecision;
    text-rendering: geometricPrecision;
  }
  
  /* Reduce paint areas */
  .chart-grid-item {
    contain: layout style paint;
  }
  
  /* Hardware acceleration for scrollable areas */
  .overflow-auto,
  .overflow-scroll {
    -webkit-overflow-scrolling: touch;
    transform: translateZ(0);
  }
  
  /* Optimize chart animations */
  .chart-transition {
    transition: transform 0.2s ease-out;
  }
  
  /* Disable expensive effects in production */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* KaTeX Formula Styles */
.katex-formula {
  font-size: 1.1em;
}

.katex-formula .katex {
  font-size: inherit;
}

/* Adjust KaTeX display in tooltips */
.katex-formula.text-base .katex {
  font-size: 1.2em;
}

.katex-formula.text-xs .katex {
  font-size: 0.9em;
}
